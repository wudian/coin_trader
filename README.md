
> 作者：吴典（Andy.Woo） @上海 手机/微信:18621528717
>


# 数字货币开发

一.总体目标： 

1.从全球数字货币交易量前20的交易所接入等行情

2.将接入的行情入库，并在客户端展示各家交易所的实时行情

3.提供在各家交易所下单的功能，从而实现套利


二.开发流程

1.在各交易所注册账号，获取api key、secret key等资料

2.试用其rest接口和websocket接口

3.在/prj/api中封装各个接口，并对外提供统一的Api调用

4.在/prj/gateway中将通过各接口取到的数据做统一转化，并考虑存数据库

5.开发自身的行情服务，提供前端访问

6.交易功能打通

三.解决的问题

1.websocket连接总是断开，如何保持长连接

2.对于被墙的网站，websocket如何通过代理访问




四.做市商策略 MMstrategy.py
根据okcoin的orderbook，灵活调整zhcoin的orderbook。要求价格一致，挂单量成有一定相关性

1.订阅okcoin的orderbook，根据比例计算出需要在交易所中挂出的orderbook

2.取交易所当前的orderbook  (详见OnTick函数)
2.1.将失效的挂单价上的所有挂单撤销
2.2.如果产生新的挂单价，那么按原数量进行挂单
2.3.如果某个挂单价上，挂单量多了，则将多出来的挂单撤掉
2.4.如果某个挂单价上，挂单量少了，则增加挂单
2.5.如果某个挂单价上，买卖方向发生了变化，则先撤销原来的挂单，再进行挂单
2.6.

3.本地建立一张表，记录所有价格上的挂单号  (详见OnOrder函数)
3.1.当收到排队或部分成交的单子时，进行记录
3.2.当收到已成交或撤单的单子时，进行删除
3.3.对于可撤单 且不在list中 ，则插入
3.4.对于某个价位上的报单全部成交了 或 撤销了，则删除价格key

